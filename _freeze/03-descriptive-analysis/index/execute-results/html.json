{
  "hash": "844b05efd7edd88168147a29e8f507ac",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"03 - Descriptive Analysis\"\nbackgroundcolor: \"white\"\n---\n\n\n\n\n## Slides\n\n[View slides in full screen](slides-03-descriptive-analysis.html){target=\"_blank\"}\n\n\n\n\n```{=html}\n<iframe class=\"slide-deck\" src=\"slides-03-descriptive-analysis.html\" height=\"420\" width=\"747\" style=\"border: 1px solid #2e3846;\"></iframe>\n```\n\n\n\n\n## Your Turn\n\n\n### Set-up\n\n#### Load necessary packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(srvyr)\nlibrary(srvyrexploR)\n```\n:::\n\n\n\n#### Load in data and preview it\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(recs_2020)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 18,496\nColumns: 100\n$ DOEID            <dbl> 100001, 100002, 100003, 100004, 100005, 100006, 10000…\n$ ClimateRegion_BA <fct> Mixed-Dry, Mixed-Humid, Mixed-Dry, Mixed-Humid, Mixed…\n$ Urbanicity       <fct> Urban Area, Urban Area, Urban Area, Urban Area, Urban…\n$ Region           <fct> West, South, West, South, Northeast, South, South, So…\n$ REGIONC          <chr> \"WEST\", \"SOUTH\", \"WEST\", \"SOUTH\", \"NORTHEAST\", \"SOUTH…\n$ Division         <fct> Mountain South, West South Central, Mountain South, S…\n$ STATE_FIPS       <chr> \"35\", \"05\", \"35\", \"45\", \"34\", \"48\", \"40\", \"28\", \"11\",…\n$ state_postal     <fct> NM, AR, NM, SC, NJ, TX, OK, MS, DC, AZ, CA, TX, LA, M…\n$ state_name       <fct> New Mexico, Arkansas, New Mexico, South Carolina, New…\n$ HDD65            <dbl> 3844, 3766, 3819, 2614, 4219, 901, 3148, 1825, 4233, …\n$ CDD65            <dbl> 1679, 1458, 1696, 1718, 1363, 3558, 2128, 2374, 1159,…\n$ HDD30YR          <dbl> 4451, 4429, 4500, 3229, 4896, 1150, 3564, 2660, 4404,…\n$ CDD30YR          <dbl> 1027, 1305, 1010, 1653, 1059, 3588, 2043, 2164, 1407,…\n$ HousingUnitType  <fct> Single-family detached, Apartment: 5 or more units, A…\n$ YearMade         <ord> 1970-1979, 1980-1989, 1960-1969, 1980-1989, 1960-1969…\n$ TOTSQFT_EN       <dbl> 2100, 590, 900, 2100, 800, 4520, 2100, 900, 750, 760,…\n$ TOTHSQFT         <dbl> 2100, 590, 900, 2100, 800, 3010, 1200, 900, 750, 760,…\n$ TOTCSQFT         <dbl> 2100, 590, 900, 2100, 800, 3010, 1200, 0, 500, 760, 1…\n$ SpaceHeatingUsed <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…\n$ ACUsed           <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE…\n$ HeatingBehavior  <fct> Set one temp and leave it, Turn on or off as needed, …\n$ WinterTempDay    <dbl> 70, 70, 69, 68, 68, 76, 74, 70, 68, 70, 72, 74, 74, 7…\n$ WinterTempAway   <dbl> 70, 65, 68, 68, 68, 76, 65, 70, 60, 70, 70, 74, 74, 7…\n$ WinterTempNight  <dbl> 68, 65, 67, 68, 68, 68, 74, 68, 62, 68, 72, 74, 74, 6…\n$ ACBehavior       <fct> Set one temp and leave it, Turn on or off as needed, …\n$ SummerTempDay    <dbl> 71, 68, 70, 72, 72, 69, 68, NA, 72, 74, 77, 77, 74, 6…\n$ SummerTempAway   <dbl> 71, 68, 68, 72, 72, 74, 70, NA, 76, 74, 77, 77, 74, 6…\n$ SummerTempNight  <dbl> 71, 68, 68, 72, 72, 68, 70, NA, 68, 72, 77, 77, 74, 6…\n$ NWEIGHT          <dbl> 3284.104, 9007.387, 5669.002, 5294.239, 9935.465, 724…\n$ NWEIGHT1         <dbl> 3273.053, 9019.564, 5793.353, 5361.146, 10047.545, 73…\n$ NWEIGHT2         <dbl> 3349.139, 9081.268, 5913.554, 5361.706, 10261.682, 74…\n$ NWEIGHT3         <dbl> 3344.876, 9020.409, 5762.743, 5371.011, 10036.522, 73…\n$ NWEIGHT4         <dbl> 3437.284, 9213.074, 5870.261, 5392.846, 9960.953, 742…\n$ NWEIGHT5         <dbl> 3415.582, 9117.337, 5720.669, 5327.617, 10107.863, 73…\n$ NWEIGHT6         <dbl> 3354.813, 9178.697, 5662.939, 5353.957, 10298.428, 74…\n$ NWEIGHT7         <dbl> 3372.342, 9095.936, 5699.536, 5325.316, 10064.709, 73…\n$ NWEIGHT8         <dbl> 3364.035, 8920.480, 5704.027, 5375.732, 10096.509, 73…\n$ NWEIGHT9         <dbl> 3361.912, 9188.981, 5667.670, 5391.379, 10321.424, 73…\n$ NWEIGHT10        <dbl> 3301.569, 9060.009, 5793.325, 5500.628, 9943.547, 731…\n$ NWEIGHT11        <dbl> 3211.291, 9127.404, 5806.321, 5427.320, 10266.593, 73…\n$ NWEIGHT12        <dbl> 3500.495, 9264.304, 5650.394, 5384.442, 10127.061, 73…\n$ NWEIGHT13        <dbl> 3313.754, 9222.011, 5648.461, 5302.085, 10240.975, 72…\n$ NWEIGHT14        <dbl> 3359.110, 9199.014, 5828.712, 5362.226, 9871.649, 740…\n$ NWEIGHT15        <dbl> 3423.682, 9143.214, 5641.887, 5383.136, 10275.303, 74…\n$ NWEIGHT16        <dbl> 3383.601, 9042.382, 5717.847, 5380.916, 9921.199, 738…\n$ NWEIGHT17        <dbl> 3312.112, 9416.815, 5968.713, 5418.300, 10311.952, 73…\n$ NWEIGHT18        <dbl> 3324.383, 9162.681, 5828.370, 5356.271, 10004.213, 74…\n$ NWEIGHT19        <dbl> 3366.644, 9191.950, 5814.049, 5343.187, 10437.297, 75…\n$ NWEIGHT20        <dbl> 3326.643, 9091.550, 5697.447, 5360.409, 10100.730, 73…\n$ NWEIGHT21        <dbl> 3339.910, 0.000, 5686.769, 5336.323, 9981.635, 7427.5…\n$ NWEIGHT22        <dbl> 3292.197, 9097.877, 5738.946, 5389.830, 10000.278, 73…\n$ NWEIGHT23        <dbl> 3277.697, 9319.896, 5944.649, 5397.093, 10179.723, 71…\n$ NWEIGHT24        <dbl> 3340.406, 9080.729, 5819.996, 5448.089, 9825.700, 746…\n$ NWEIGHT25        <dbl> 3386.445, 9406.487, 5823.075, 5382.111, 10149.386, 72…\n$ NWEIGHT26        <dbl> 3300.574, 9255.867, 5650.188, 5386.710, 0.000, 7309.1…\n$ NWEIGHT27        <dbl> 3311.546, 9318.078, 5862.116, 5351.082, 10140.604, 72…\n$ NWEIGHT28        <dbl> 3347.637, 9154.189, 5706.909, 5371.439, 9948.403, 750…\n$ NWEIGHT29        <dbl> 3355.638, 9371.695, 5618.615, 5361.572, 10064.708, 73…\n$ NWEIGHT30        <dbl> 3322.423, 9137.197, 5795.544, 5381.218, 10082.927, 73…\n$ NWEIGHT31        <dbl> 3255.840, 9233.363, 5994.544, 5319.728, 10132.977, 73…\n$ NWEIGHT32        <dbl> 3317.937, 9114.608, 0.000, 5338.558, 9978.370, 7302.5…\n$ NWEIGHT33        <dbl> 3401.811, 9176.872, 5637.872, 0.000, 10213.075, 7326.…\n$ NWEIGHT34        <dbl> 3363.592, 9191.207, 5619.040, 5379.523, 9964.337, 724…\n$ NWEIGHT35        <dbl> 3303.528, 9100.344, 5652.289, 5363.277, 10070.847, 0.…\n$ NWEIGHT36        <dbl> 3333.027, 9071.530, 5834.171, 5476.866, 9987.947, 735…\n$ NWEIGHT37        <dbl> 3389.869, 9263.141, 5712.198, 5386.333, 10120.314, 73…\n$ NWEIGHT38        <dbl> 3381.503, 9077.901, 5765.422, 5326.402, 10023.636, 73…\n$ NWEIGHT39        <dbl> 3328.893, 9011.009, 5887.338, 5420.540, 10023.919, 73…\n$ NWEIGHT40        <dbl> 3292.829, 9166.222, 5649.809, 5370.189, 10184.527, 73…\n$ NWEIGHT41        <dbl> 3295.089, 9091.334, 5957.748, 5339.323, 10069.084, 73…\n$ NWEIGHT42        <dbl> 3413.593, 9193.664, 5592.619, 5328.788, 9958.721, 743…\n$ NWEIGHT43        <dbl> 3263.710, 9215.337, 6035.472, 5409.435, 10352.485, 73…\n$ NWEIGHT44        <dbl> 3342.446, 9048.092, 5732.384, 5416.488, 10091.807, 74…\n$ NWEIGHT45        <dbl> 3275.274, 9258.580, 5876.696, 5453.165, 10227.529, 74…\n$ NWEIGHT46        <dbl> 3364.248, 9170.518, 5653.511, 5449.444, 10069.384, 73…\n$ NWEIGHT47        <dbl> 3336.066, 9260.064, 5763.458, 5375.551, 9995.686, 732…\n$ NWEIGHT48        <dbl> 3329.151, 9105.220, 5928.968, 5407.834, 10197.608, 73…\n$ NWEIGHT49        <dbl> 3348.061, 9116.891, 5772.333, 5399.779, 10093.620, 74…\n$ NWEIGHT50        <dbl> 3357.231, 9261.127, 5785.452, 5359.408, 10196.251, 73…\n$ NWEIGHT51        <dbl> 3335.188, 8955.288, 5635.561, 5447.619, 10017.094, 73…\n$ NWEIGHT52        <dbl> 3240.132, 9000.296, 5944.330, 5344.453, 9954.142, 749…\n$ NWEIGHT53        <dbl> 3429.728, 9290.375, 5683.500, 5437.803, 10050.961, 74…\n$ NWEIGHT54        <dbl> 3294.084, 9199.326, 5735.631, 5377.898, 10018.844, 72…\n$ NWEIGHT55        <dbl> 3397.713, 8958.782, 5674.564, 5357.470, 10309.728, 75…\n$ NWEIGHT56        <dbl> 3292.610, 9232.597, 5660.854, 5421.025, 10142.763, 73…\n$ NWEIGHT57        <dbl> 0.000, 9140.427, 5917.193, 5365.230, 10176.828, 7383.…\n$ NWEIGHT58        <dbl> 3369.768, 9306.997, 5571.015, 5402.057, 10043.143, 75…\n$ NWEIGHT59        <dbl> 3358.163, 9061.782, 5887.092, 5402.772, 10247.911, 73…\n$ NWEIGHT60        <dbl> 3404.031, 8957.915, 5837.846, 5350.860, 10110.301, 75…\n$ BTUEL            <dbl> 42723.28, 17889.29, 8146.63, 31646.53, 20027.42, 4896…\n$ DOLLAREL         <dbl> 1955.06, 713.27, 334.51, 1424.86, 1087.00, 1895.66, 1…\n$ BTUNG            <dbl> 101924.43, 10145.32, 22603.08, 55118.66, 39099.51, 36…\n$ DOLLARNG         <dbl> 701.8300, 261.7348, 188.1400, 636.9100, 376.0400, 439…\n$ BTULP            <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ DOLLARLP         <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ BTUFO            <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ DOLLARFO         <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00,…\n$ BTUWOOD          <dbl> 0, 0, 0, 0, 0, 3000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ TOTALBTU         <dbl> 144647.71, 28034.61, 30749.71, 86765.19, 59126.93, 85…\n$ TOTALDOL         <dbl> 2656.8900, 975.0048, 522.6500, 2061.7700, 1463.0400, …\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(anes_2020)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 7,453\nColumns: 65\n$ V200001                 <dbl> 200015, 200022, 200039, 200046, 200053, 200060…\n$ CaseID                  <dbl> 200015, 200022, 200039, 200046, 200053, 200060…\n$ V200002                 <hvn_lbll> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,…\n$ InterviewMode           <fct> Web, Web, Web, Web, Web, Web, Web, Web, Web, W…\n$ V200010b                <dbl> 1.0057375, 1.1634731, 0.7686811, 0.5210195, 0.…\n$ Weight                  <dbl> 1.0057375, 1.1634731, 0.7686811, 0.5210195, 0.…\n$ V200010c                <dbl> 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 2…\n$ VarUnit                 <fct> 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 2…\n$ V200010d                <dbl> 9, 26, 41, 29, 23, 37, 7, 37, 32, 41, 22, 7, 3…\n$ Stratum                 <fct> 9, 26, 41, 29, 23, 37, 7, 37, 32, 41, 22, 7, 3…\n$ V201006                 <hvn_lbll> 2, 3, 2, 3, 2, 1, 2, 3, 2, 2, 2, 2, 2, 1,…\n$ CampaignInterest        <fct> Somewhat interested, Not much interested, Some…\n$ V201023                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, -1…\n$ EarlyVote2020           <fct> NA, NA, NA, NA, NA, NA, NA, NA, Yes, NA, NA, N…\n$ V201024                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, -1, 2, -1, -1…\n$ V201025x                <hvn_lbll> 3, 3, 3, 3, 3, 3, 3, 2, 4, 3, 3, 3, 2, 4,…\n$ V201028                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, -1…\n$ V201029                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, -1, 1, -1, -1…\n$ V201101                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, -1, 1, 1, 2, …\n$ V201102                 <hvn_lbll> 1, 1, 1, 1, 1, 2, 1, 2, -1, -1, -1, 1, 2,…\n$ VotedPres2016           <fct> Yes, Yes, Yes, Yes, Yes, No, Yes, No, Yes, Yes…\n$ V201103                 <hvn_lbll> 2, 5, 1, 1, 2, -1, 5, -1, 1, 1, -1, 1, -1…\n$ VotedPres2016_selection <fct> Trump, Other, Clinton, Clinton, Trump, NA, Oth…\n$ V201228                 <hvn_lbll> 2, 5, 3, 2, 3, 3, 2, 2, 3, 1, 1, 1, 2, 1,…\n$ V201229                 <hvn_lbll> 1, -1, -1, 2, -1, -1, 2, 2, -1, 2, 1, 2, …\n$ V201230                 <hvn_lbll> -1, 2, 3, -1, 2, 3, -1, -1, 2, -1, -1, -1…\n$ V201231x                <hvn_lbll> 7, 4, 3, 6, 4, 3, 6, 6, 4, 2, 1, 2, 7, 2,…\n$ PartyID                 <fct> Strong republican, Independent, Independent-de…\n$ V201233                 <hvn_lbll> 5, 5, 4, 3, 5, 4, 4, 1, 3, 3, 2, 3, 4, 5,…\n$ TrustGovernment         <fct> Never, Never, Some of the time, About half the…\n$ V201237                 <hvn_lbll> 3, 4, 4, 2, 4, 2, 4, 1, 3, 2, 4, 3, 4, 3,…\n$ TrustPeople             <fct> About half the time, Some of the time, Some of…\n$ V201507x                <hvn_lbll> 46, 37, 40, 41, 72, 71, 37, 45, 70, 43, 3…\n$ Age                     <dbl> 46, 37, 40, 41, 72, 71, 37, 45, 70, 43, 37, 55…\n$ AgeGroup                <fct> 40-49, 30-39, 40-49, 40-49, 70 or older, 70 or…\n$ V201510                 <hvn_lbll> 6, 3, 2, 4, 8, 3, 4, 2, 2, 4, 2, 2, 2, 7,…\n$ Education               <fct> Bachelor's, Post HS, High school, Post HS, Gra…\n$ V201546                 <hvn_lbll> 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 2, 2, 2,…\n$ V201547a                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201547b                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201547c                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201547d                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201547e                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201547z                <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201549x                <hvn_lbll> 3, 4, 1, 4, 5, 1, 1, 1, 1, 3, 3, 1, 1, 4,…\n$ RaceEth                 <fct> \"Hispanic\", \"Asian, NH/PI\", \"White\", \"Asian, N…\n$ V201600                 <hvn_lbll> 1, 2, 2, 1, 1, 2, 2, 2, 2, 1, 2, 1, 2, 1,…\n$ Gender                  <fct> Male, Female, Female, Male, Male, Female, Fema…\n$ V201607                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201610                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201611                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201613                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201615                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201616                 <hvn_lbll> -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -…\n$ V201617x                <hvn_lbll> 21, 13, 17, 7, 22, 3, 4, 3, 10, 11, 9, 18…\n$ Income                  <fct> \"$175,000-249,999\", \"$70,000-74,999\", \"$100,00…\n$ Income7                 <fct> $125k or more, $60k to < 80k, $100k to < 125k,…\n$ V202051                 <hvn_lbll> -1, -1, -1, -1, -1, -1, -1, 1, -1, -1, -1…\n$ V202066                 <hvn_lbll> 1, 4, 4, 4, 4, 4, 4, 1, -1, 4, 4, 4, 4, -…\n$ V202072                 <hvn_lbll> -1, 1, 1, 1, 1, 1, 1, -1, -1, 1, 1, 1, 1,…\n$ VotedPres2020           <fct> NA, Yes, Yes, Yes, Yes, Yes, Yes, NA, Yes, Yes…\n$ V202073                 <hvn_lbll> -1, 3, 1, 1, 2, 1, 2, -1, -1, 1, 1, 1, 2,…\n$ V202109x                <hvn_lbll> 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1,…\n$ V202110x                <hvn_lbll> -1, 3, 1, 1, 2, 1, 2, -1, 1, 1, 1, 1, 2, …\n$ VotedPres2020_selection <fct> NA, Other, Biden, Biden, Trump, Biden, Trump, …\n```\n\n\n:::\n:::\n\n\n\nFind codebooks here:\n\n  - [RECS 2020](https://tidy-survey-r.github.io/tidy-survey-book/recs-cb.html)\n  - [ANES 2020](https://tidy-survey-r.github.io/tidy-survey-book/anes-cb.html)\n\n#### Create design objects for usage\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nanes_des <- anes_2020 %>%\n  mutate(Weight = V200010b / sum(V200010b) * 231034125) %>%\n  as_survey_design(\n    weights = Weight,\n    strata = V200010d,\n    ids = V200010c,\n    nest = TRUE\n  )\n\nrecs_des <- recs_2020 %>%\n  as_survey_rep(\n    weights = NWEIGHT,\n    repweights = NWEIGHT1:NWEIGHT60,\n    type = \"JK1\",\n    scale = 59 / 60,\n    mse = TRUE\n  )\n```\n:::\n\n\n\n### Exercises - Part 1\n\n1. How many females have a graduate degree (according to the ANES data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variables `Gender` and `Education` will be useful.\n```\n:::\n\n\n\n2. What percentage of people identify as “Strong Democrat”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `PartyID` indicates someone’s party affiliation.\n```\n:::\n\n\n\n3. What percentage of people who voted in the 2020 election identify as “Strong Republican”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `VotedPres2020` indicates whether someone voted in 2020.\n```\n:::\n\n\n\n4. What percentage of people voted in both the 2016 election and the 2020 election? Include the logit confidence interval. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable VotedPres2016 indicates whether someone voted in 2016.\n```\n:::\n\n\n\n5. **Advanced bonus exercise** What percentage of people used air-conditioning (A/C) in each state according to the RECS data? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `state_postal` indicates the state and `ACUsed` indicates whether the household used A/C\n```\n:::\n\n\n\n\n### Exercises - Part 2\n\n6. What is the design effect for the proportion of people who voted early? \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `EarlyVote2020` indicates whether someone voted early in 2020.\n```\n:::\n\n\n\n7. What is the median temperature people set their thermostats to at night during the winter (using the RECS data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `WinterTempNight` indicates the temperature that people set their thermostat to in the winter at night.\n```\n:::\n\n\n\n8. People sometimes set their temperature differently over different seasons and during the day. What median temperatures do people set their thermostats to in the summer and winter, both during the day and at night? Include confidence intervals.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: Use the variables `WinterTempDay`, `WinterTempNight`, `SummerTempDay`, and `SummerTempNight.`\n```\n:::\n\n\n\n9. What is the correlation between the temperature that people set their temperature at during the night and during the day in the summer?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: use the variables `SummerTempNight` and `SummerTempDay`\n```\n:::\n\n\n\n10. What is the 1st, 2nd, and 3rd quartile of money spent on energy by Building America (BA) climate zone?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: `TOTALDOL` indicates the total amount spent on all fuel, and `ClimateRegion_BA` indicates the BA climate zones.\n```\n:::\n\n\n\n11. **Advanced bonus exercise** What is the average money spent on energy per square foot by state? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Hint: The variable `state_postal` indicates the state, `TOTALDOL` is the amount of money spent on energy, and `TOTSQFT_EN` is the square footage\n```\n:::\n\n\n\n\n\n\n\n## Solutions\n\n<details>\n  <summary>See the solutions</summary>\n\n\n\n\n\n\n\n\n\n\n### Exercises - Part 1\n\n1. How many females have a graduate degree (according to the ANES data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  survey_count(Gender, Education) %>%\n  filter(Gender == \"Female\", Education == \"Graduate\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  Gender Education         n    n_se\n  <fct>  <fct>         <dbl>   <dbl>\n1 Female Graduate  15072196. 837872.\n```\n\n\n:::\n:::\n\n\n\n2. What percentage of people identify as “Strong Democrat”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(!is.na(PartyID)) %>%\n  group_by(PartyID) %>%\n  summarize(\n    p = survey_prop()\n  ) %>%\n  filter(PartyID == \"Strong democrat\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWhen `proportion` is unspecified, `survey_prop()` now defaults to `proportion = TRUE`.\nℹ This should improve confidence interval coverage.\nThis message is displayed once per session.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  PartyID             p    p_se\n  <fct>           <dbl>   <dbl>\n1 Strong democrat 0.219 0.00651\n```\n\n\n:::\n:::\n\n\n\n3. What percentage of people who voted in the 2020 election identify as “Strong Republican”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(VotedPres2020 == \"Yes\") %>%\n  group_by(PartyID) %>%\n  filter(!is.na(PartyID)) %>%\n  summarize(\n    p = survey_prop()\n  ) %>%\n  filter(PartyID == \"Strong republican\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  PartyID               p    p_se\n  <fct>             <dbl>   <dbl>\n1 Strong republican 0.228 0.00832\n```\n\n\n:::\n:::\n\n\n\n4. What percentage of people voted in both the 2016 election and the 2020 election? Include the logit confidence interval. \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(!is.na(VotedPres2016), !is.na(VotedPres2020)) %>%\n  group_by(interact(VotedPres2016, VotedPres2020)) %>%\n  summarize(\n    p = survey_prop(vartype = \"ci\", prop_method = \"likelihood\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 5\n  VotedPres2016 VotedPres2020       p   p_low  p_upp\n  <fct>         <fct>           <dbl>   <dbl>  <dbl>\n1 Yes           Yes           0.794   0.777   0.810 \n2 Yes           No            0.0163  0.0116  0.0221\n3 No            Yes           0.185   0.169   0.201 \n4 No            No            0.00518 0.00221 0.0100\n```\n\n\n:::\n:::\n\n\n\n5. **Advanced bonus exercise** What percentage of people used air-conditioning (A/C) in each state according to the RECS data? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nac_by_state <- recs_des %>%\n  group_by(state_postal) %>%\n  summarize(\n    PctAC = survey_mean(ACUsed * 100)\n  )\n\nac_by_state\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 51 × 3\n   state_postal PctAC PctAC_se\n   <fct>        <dbl>    <dbl>\n 1 AL           93.5     1.52 \n 2 AK            6.94    1.51 \n 3 AZ           94.2     1.31 \n 4 AR           93.4     1.86 \n 5 CA           72.4     1.41 \n 6 CO           81.7     2.15 \n 7 CT           89.6     1.95 \n 8 DE           97.0     1.51 \n 9 DC           93.3     1.82 \n10 FL           95.8     0.785\n# ℹ 41 more rows\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nlibrary(usmap)\n\nus_map() %>%\n  left_join(ac_by_state, by = c(\"abbr\" = \"state_postal\")) %>%\n  ggplot(aes(fill = PctAC)) +\n  geom_sf() +\n  ggthemes::theme_map() +\n  scale_fill_viridis_c(name = \"A/C Used (%)\") +\n  labs(\n    title = \"Percent of housing units using air-conditioning, 2020\",\n    caption = \"U.S. Energy Information Administration, 2024. Residential Energy Consumption 2020\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/desc-sol-1-5-1.png){width=672}\n:::\n:::\n\n\n\n\n### Exercises - Part 2\n\n6. What is the design effect for the proportion of people who voted early? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  group_by(EarlyVote2020) %>%\n  summarize(\n    p = survey_mean(deff = TRUE)\n  ) %>%\n  filter(EarlyVote2020 == \"Yes\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  EarlyVote2020      p    p_se p_deff\n  <fct>          <dbl>   <dbl>  <dbl>\n1 Yes           0.0417 0.00347   2.24\n```\n\n\n:::\n:::\n\n\n\n7. What is the median temperature people set their thermostats to at night during the winter (using the RECS data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  summarize(\n    med_night_winter_temp = survey_median(WinterTempNight, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  med_night_winter_temp med_night_winter_temp_se\n                  <dbl>                    <dbl>\n1                    68                    0.250\n```\n\n\n:::\n:::\n\n\n\n8. People sometimes set their temperature differently over different seasons and during the day. What median temperatures do people set their thermostats to in the summer and winter, both during the day and at night? Include confidence intervals.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nests_med_temps <-\n  recs_des %>%\n  summarize(\n    across(contains(\"Temp\"), ~ survey_median(.x, na.rm = TRUE, vartype = \"ci\"))\n  )\n\nests_med_temps\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 18\n  WinterTempDay WinterTempDay_low WinterTempDay_upp WinterTempAway\n          <dbl>             <dbl>             <dbl>          <dbl>\n1            70                70                71             68\n# ℹ 14 more variables: WinterTempAway_low <dbl>, WinterTempAway_upp <dbl>,\n#   WinterTempNight <dbl>, WinterTempNight_low <dbl>,\n#   WinterTempNight_upp <dbl>, SummerTempDay <dbl>, SummerTempDay_low <dbl>,\n#   SummerTempDay_upp <dbl>, SummerTempAway <dbl>, SummerTempAway_low <dbl>,\n#   SummerTempAway_upp <dbl>, SummerTempNight <dbl>, SummerTempNight_low <dbl>,\n#   SummerTempNight_upp <dbl>\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nests_med_temps %>%\n  pivot_longer(cols = everything()) %>%\n  separate_wider_delim(name, delim = \"_\", names = c(\"Var\", \"EstType\"), too_few = \"align_start\") %>%\n  mutate(\n    EstType = if_else(is.na(EstType), \"Median\", EstType)\n  ) %>%\n  pivot_wider(names_from = EstType, values_from = value)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Var             Median   low   upp\n  <chr>            <dbl> <dbl> <dbl>\n1 WinterTempDay       70    70    71\n2 WinterTempAway      68    68    69\n3 WinterTempNight     68    68    69\n4 SummerTempDay       72    72    73\n5 SummerTempAway      74    74    75\n6 SummerTempNight     72    72    73\n```\n\n\n:::\n:::\n\n\n\n9. What is the correlation between the temperature that people set their temperature at during the night and during the day in the summer?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  summarize(\n    rho_temps = survey_corr(SummerTempNight, SummerTempDay, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `dplyr::summarise()`.\nℹ In argument: `rho_temps = survey_corr(SummerTempNight, SummerTempDay, na.rm =\n  TRUE)`.\nCaused by warning in `sweep()`:\n! length(STATS) or dim(STATS) do not match dim(x)[MARGIN]\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  rho_temps rho_temps_se\n      <dbl>        <dbl>\n1     0.806      0.00806\n```\n\n\n:::\n:::\n\n\n\n10. What is the 1st, 2nd, and 3rd quartile of money spent on energy by Building America (BA) climate zone? Include the national estimates as well.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  group_by(ClimateRegion_BA) %>%\n  cascade(\n    EnergyCost = survey_quantile(TOTALDOL, quantiles = c(.25, .5, .75)),\n    .fill = \"National\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 7\n  ClimateRegion_BA EnergyCost_q25 EnergyCost_q50 EnergyCost_q75\n  <fct>                     <dbl>          <dbl>          <dbl>\n1 Mixed-Dry                 1091.          1541.          2139.\n2 Mixed-Humid               1317.          1840.          2462.\n3 Hot-Humid                 1094.          1622.          2233.\n4 Hot-Dry                    926.          1513.          2223.\n5 Very-Cold                 1195.          1986.          2955.\n6 Cold                      1213.          1756.          2422.\n7 Marine                     938.          1380.          1987.\n8 Subarctic                 2404.          3535.          5219.\n9 National                  1168.          1713.          2360.\n# ℹ 3 more variables: EnergyCost_q25_se <dbl>, EnergyCost_q50_se <dbl>,\n#   EnergyCost_q75_se <dbl>\n```\n\n\n:::\n:::\n\n\n\n11. **Advanced bonus exercise** What is the average money spent on energy per square foot by state? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nenergy_spend_by_state <- recs_des %>%\n  group_by(state_postal) %>%\n  summarize(\n    EnergyCost = survey_mean(TOTALDOL / TOTSQFT_EN)\n  )\n\nenergy_spend_by_state\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 51 × 3\n   state_postal EnergyCost EnergyCost_se\n   <fct>             <dbl>         <dbl>\n 1 AL                1.42         0.0522\n 2 AK                1.98         0.0720\n 3 AZ                1.36         0.0326\n 4 AR                1.35         0.0529\n 5 CA                1.23         0.0202\n 6 CO                0.801        0.0274\n 7 CT                1.70         0.0606\n 8 DE                1.11         0.0481\n 9 DC                1.14         0.0332\n10 FL                1.15         0.0246\n# ℹ 41 more rows\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nlibrary(usmap)\n\nus_map() %>%\n  left_join(energy_spend_by_state, by = c(\"abbr\" = \"state_postal\")) %>%\n  ggplot(aes(fill = EnergyCost)) +\n  geom_sf() +\n  ggthemes::theme_map() +\n  scale_fill_viridis_c(name = \"$/sq ft\") +\n  labs(\n    title = \"Average residential energy cost per square foot, 2020\",\n    caption = \"U.S. Energy Information Administration, 2024. Residential Energy Consumption 2020\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/desc-sol-2-6-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n</details>\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}