{
  "hash": "5dfc521448a81a15fad0c12baaa0c7bd",
  "result": {
    "engine": "knitr",
    "markdown": "\n\n\n\n\n\n### Exercises - Part 1\n\n1. How many females have a graduate degree (according to the ANES data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  survey_count(Gender, Education) %>%\n  filter(Gender == \"Female\", Education == \"Graduate\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  Gender Education         n    n_se\n  <fct>  <fct>         <dbl>   <dbl>\n1 Female Graduate  15072196. 837872.\n```\n\n\n:::\n:::\n\n\n\n2. What percentage of people identify as “Strong Democrat”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(!is.na(PartyID)) %>%\n  group_by(PartyID) %>%\n  summarize(\n    p = survey_prop()\n  ) %>%\n  filter(PartyID == \"Strong democrat\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWhen `proportion` is unspecified, `survey_prop()` now defaults to `proportion = TRUE`.\nℹ This should improve confidence interval coverage.\nThis message is displayed once per session.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  PartyID             p    p_se\n  <fct>           <dbl>   <dbl>\n1 Strong democrat 0.219 0.00651\n```\n\n\n:::\n:::\n\n\n\n3. What percentage of people who voted in the 2020 election identify as “Strong Republican”? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(VotedPres2020 == \"Yes\") %>%\n  group_by(PartyID) %>%\n  filter(!is.na(PartyID)) %>%\n  summarize(\n    p = survey_prop()\n  ) %>%\n  filter(PartyID == \"Strong republican\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  PartyID               p    p_se\n  <fct>             <dbl>   <dbl>\n1 Strong republican 0.228 0.00832\n```\n\n\n:::\n:::\n\n\n\n4. What percentage of people voted in both the 2016 election and the 2020 election? Include the logit confidence interval. \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  filter(!is.na(VotedPres2016), !is.na(VotedPres2020)) %>%\n  group_by(interact(VotedPres2016, VotedPres2020)) %>%\n  summarize(\n    p = survey_prop(vartype = \"ci\", prop_method = \"likelihood\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 5\n  VotedPres2016 VotedPres2020       p   p_low  p_upp\n  <fct>         <fct>           <dbl>   <dbl>  <dbl>\n1 Yes           Yes           0.794   0.777   0.810 \n2 Yes           No            0.0163  0.0116  0.0221\n3 No            Yes           0.185   0.169   0.201 \n4 No            No            0.00518 0.00221 0.0100\n```\n\n\n:::\n:::\n\n\n\n5. **Advanced bonus exercise** What percentage of people used air-conditioning (A/C) in each state according to the RECS data? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nac_by_state <- recs_des %>%\n  group_by(state_postal) %>%\n  summarize(\n    PctAC = survey_mean(ACUsed * 100)\n  )\n\nac_by_state\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 51 × 3\n   state_postal PctAC PctAC_se\n   <fct>        <dbl>    <dbl>\n 1 AL           93.5     1.52 \n 2 AK            6.94    1.51 \n 3 AZ           94.2     1.31 \n 4 AR           93.4     1.86 \n 5 CA           72.4     1.41 \n 6 CO           81.7     2.15 \n 7 CT           89.6     1.95 \n 8 DE           97.0     1.51 \n 9 DC           93.3     1.82 \n10 FL           95.8     0.785\n# ℹ 41 more rows\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nlibrary(usmap)\n\nus_map() %>%\n  left_join(ac_by_state, by = c(\"abbr\" = \"state_postal\")) %>%\n  ggplot(aes(fill = PctAC)) +\n  geom_sf() +\n  ggthemes::theme_map() +\n  scale_fill_viridis_c(name = \"A/C Used (%)\") +\n  labs(\n    title = \"Percent of housing units using air-conditioning, 2020\",\n    caption = \"U.S. Energy Information Administration, 2024. Residential Energy Consumption 2020\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-descriptive-exercise-solutions_files/figure-html/desc-sol-1-5-1.png){width=672}\n:::\n:::\n\n\n\n\n### Exercises - Part 2\n\n6. What is the design effect for the proportion of people who voted early? \n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nanes_des %>%\n  group_by(EarlyVote2020) %>%\n  summarize(\n    p = survey_mean(deff = TRUE)\n  ) %>%\n  filter(EarlyVote2020 == \"Yes\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  EarlyVote2020      p    p_se p_deff\n  <fct>          <dbl>   <dbl>  <dbl>\n1 Yes           0.0417 0.00347   2.24\n```\n\n\n:::\n:::\n\n\n\n7. What is the median temperature people set their thermostats to at night during the winter (using the RECS data)?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  summarize(\n    med_night_winter_temp = survey_median(WinterTempNight, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  med_night_winter_temp med_night_winter_temp_se\n                  <dbl>                    <dbl>\n1                    68                    0.250\n```\n\n\n:::\n:::\n\n\n\n8. People sometimes set their temperature differently over different seasons and during the day. What median temperatures do people set their thermostats to in the summer and winter, both during the day and at night? Include confidence intervals.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nests_med_temps <-\n  recs_des %>%\n  summarize(\n    across(contains(\"Temp\"), ~ survey_median(.x, na.rm = TRUE, vartype = \"ci\"))\n  )\n\nests_med_temps\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 18\n  WinterTempDay WinterTempDay_low WinterTempDay_upp WinterTempAway\n          <dbl>             <dbl>             <dbl>          <dbl>\n1            70                70                71             68\n# ℹ 14 more variables: WinterTempAway_low <dbl>, WinterTempAway_upp <dbl>,\n#   WinterTempNight <dbl>, WinterTempNight_low <dbl>,\n#   WinterTempNight_upp <dbl>, SummerTempDay <dbl>, SummerTempDay_low <dbl>,\n#   SummerTempDay_upp <dbl>, SummerTempAway <dbl>, SummerTempAway_low <dbl>,\n#   SummerTempAway_upp <dbl>, SummerTempNight <dbl>, SummerTempNight_low <dbl>,\n#   SummerTempNight_upp <dbl>\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nests_med_temps %>%\n  pivot_longer(cols = everything()) %>%\n  separate_wider_delim(name, delim = \"_\", names = c(\"Var\", \"EstType\"), too_few = \"align_start\") %>%\n  mutate(\n    EstType = if_else(is.na(EstType), \"Median\", EstType)\n  ) %>%\n  pivot_wider(names_from = EstType, values_from = value)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Var             Median   low   upp\n  <chr>            <dbl> <dbl> <dbl>\n1 WinterTempDay       70    70    71\n2 WinterTempAway      68    68    69\n3 WinterTempNight     68    68    69\n4 SummerTempDay       72    72    73\n5 SummerTempAway      74    74    75\n6 SummerTempNight     72    72    73\n```\n\n\n:::\n:::\n\n\n\n9. What is the correlation between the temperature that people set their temperature at during the night and during the day in the summer?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  summarize(\n    rho_temps = survey_corr(SummerTempNight, SummerTempDay, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `dplyr::summarise()`.\nℹ In argument: `rho_temps = survey_corr(SummerTempNight, SummerTempDay, na.rm =\n  TRUE)`.\nCaused by warning in `sweep()`:\n! length(STATS) or dim(STATS) do not match dim(x)[MARGIN]\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n  rho_temps rho_temps_se\n      <dbl>        <dbl>\n1     0.806      0.00806\n```\n\n\n:::\n:::\n\n\n\n10. What is the 1st, 2nd, and 3rd quartile of money spent on energy by Building America (BA) climate zone? Include the national estimates as well.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nrecs_des %>%\n  group_by(ClimateRegion_BA) %>%\n  cascade(\n    EnergyCost = survey_quantile(TOTALDOL, quantiles = c(.25, .5, .75)),\n    .fill = \"National\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 7\n  ClimateRegion_BA EnergyCost_q25 EnergyCost_q50 EnergyCost_q75\n  <fct>                     <dbl>          <dbl>          <dbl>\n1 Mixed-Dry                 1091.          1541.          2139.\n2 Mixed-Humid               1317.          1840.          2462.\n3 Hot-Humid                 1094.          1622.          2233.\n4 Hot-Dry                    926.          1513.          2223.\n5 Very-Cold                 1195.          1986.          2955.\n6 Cold                      1213.          1756.          2422.\n7 Marine                     938.          1380.          1987.\n8 Subarctic                 2404.          3535.          5219.\n9 National                  1168.          1713.          2360.\n# ℹ 3 more variables: EnergyCost_q25_se <dbl>, EnergyCost_q50_se <dbl>,\n#   EnergyCost_q75_se <dbl>\n```\n\n\n:::\n:::\n\n\n\n11. **Advanced bonus exercise** What is the average money spent on energy per square foot by state? Extra bonus: Make a plot or map of this data by state\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nenergy_spend_by_state <- recs_des %>%\n  group_by(state_postal) %>%\n  summarize(\n    EnergyCost = survey_mean(TOTALDOL / TOTSQFT_EN)\n  )\n\nenergy_spend_by_state\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 51 × 3\n   state_postal EnergyCost EnergyCost_se\n   <fct>             <dbl>         <dbl>\n 1 AL                1.42         0.0522\n 2 AK                1.98         0.0720\n 3 AZ                1.36         0.0326\n 4 AR                1.35         0.0529\n 5 CA                1.23         0.0202\n 6 CO                0.801        0.0274\n 7 CT                1.70         0.0606\n 8 DE                1.11         0.0481\n 9 DC                1.14         0.0332\n10 FL                1.15         0.0246\n# ℹ 41 more rows\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show the solution\"}\nlibrary(usmap)\n\nus_map() %>%\n  left_join(energy_spend_by_state, by = c(\"abbr\" = \"state_postal\")) %>%\n  ggplot(aes(fill = EnergyCost)) +\n  geom_sf() +\n  ggthemes::theme_map() +\n  scale_fill_viridis_c(name = \"$/sq ft\") +\n  labs(\n    title = \"Average residential energy cost per square foot, 2020\",\n    caption = \"U.S. Energy Information Administration, 2024. Residential Energy Consumption 2020\"\n  )\n```\n\n::: {.cell-output-display}\n![](03-descriptive-exercise-solutions_files/figure-html/desc-sol-2-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "03-descriptive-exercise-solutions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}